# Lumi HumanOS ç³»ç»Ÿæ¶æ„è®¾è®¡

> **æ ¸å¿ƒç†å¿µ**ï¼šLumi æ˜¯äººç±»æ“ä½œç³»ç»Ÿçš„ Agent Orchestratorï¼ˆä»£ç†ç¼–æ’å™¨ï¼‰
> **èŒƒå¼**ï¼šHuman-as-Tool â€”â€” äººç±»è¡Œä¸ºæ˜¯ AI çš„ API æ¥å£

---

## ğŸ“Š ä¸€ã€ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Lumi HumanOS                                  â”‚
â”‚                  "Human-as-Tool" Agent Orchestrator                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Layer 1: PLANNER (è§„åˆ’å±‚)                         â”‚ â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ æ‰§è¡Œæ„å›¾ç¼–è¯‘å™¨  â”‚   â”‚  ä¹ æƒ¯å åŠ å¼•æ“   â”‚   â”‚  å¼¹æ€§åŒºé—´è®¡ç®—   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Implementation  â”‚   â”‚  Habit Stacking â”‚   â”‚  Comfort Zone   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚    Intentions   â”‚   â”‚     Engine      â”‚   â”‚   Calculator    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚   (KRIYA)       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ "22:15 å…³å±å¹•"  â”‚   â”‚ "å–å’–å•¡ååƒè¯" â”‚   â”‚  "4000-6000æ­¥"  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  ç°æœ‰å®ç°: âŒ æ—                                                      â”‚ â”‚
â”‚  â”‚  éœ€è¦æ–°å¢: useHabitPlanner, useDynamicGoal                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Layer 2: EXECUTOR (æ‰§è¡Œå±‚)                        â”‚ â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  ç¯å¢ƒè®¾è®¡å¼•æ“   â”‚   â”‚ ä¸Šä¸‹æ–‡æ„ŸçŸ¥è§¦å‘å™¨â”‚   â”‚  æ‘©æ“¦åŠ›è°ƒèŠ‚å™¨   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Environment    â”‚   â”‚  Context-aware  â”‚   â”‚   Friction      â”‚   â”‚ â”‚
â”‚  â”‚  â”‚    Designer     â”‚   â”‚    Trigger      â”‚   â”‚   Controller    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ "è°ƒæš—ç¯å…‰"      â”‚   â”‚ "æ£€æµ‹åˆ°å›å®¶"   â”‚   â”‚ "é”å®š TikTok"   â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  ç°æœ‰å®ç°: âš ï¸ éƒ¨åˆ† (useVirtualMessages, æ¨é€é€šçŸ¥)                   â”‚ â”‚
â”‚  â”‚  éœ€è¦æ–°å¢: MCP æ™ºèƒ½å®¶å±…é›†æˆ, App ä½¿ç”¨é™åˆ¶ API                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Layer 3: VERIFIER (éªŒè¯å±‚)                        â”‚ â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  å¤šæ¨¡æ€éªŒè¯å™¨   â”‚   â”‚  ä¹ æƒ¯è¿½è¸ªå¯è§†åŒ– â”‚   â”‚  ä¾¦æ¢æ¨¡å¼       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Multi-modal    â”‚   â”‚  Habit Tracker  â”‚   â”‚  Detective Mode â”‚   â”‚ â”‚
â”‚  â”‚  â”‚    Verifier     â”‚   â”‚   Visualizer    â”‚   â”‚    (KRIYA)      â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ "æ‹æ‘„ä¹¦é¡µéªŒè¯" â”‚   â”‚ "Don't Break    â”‚   â”‚  "æ˜¯å› ä¸ºä¸‹é›¨    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚   the Chain"    â”‚   â”‚   æ‰€ä»¥æ²¡è·‘æ­¥?"  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  ç°æœ‰å®ç°: âš ï¸ éƒ¨åˆ† (Gemini è§†è§‰, StatsView ç»Ÿè®¡)                    â”‚ â”‚
â”‚  â”‚  éœ€è¦æ–°å¢: useHabitVerifier, useAttributionEngine                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Layer 4: MEMORY (è®°å¿†å±‚)                          â”‚ â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  èº«ä»½å»ºæ¨¡å¼•æ“   â”‚   â”‚  é•¿æœŸè®°å¿†å­˜å‚¨   â”‚   â”‚  å¤±è´¥æ¨¡å¼è¯†åˆ«   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Identity       â”‚   â”‚  Long-term      â”‚   â”‚  Failure        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚    Modeler      â”‚   â”‚    Memory       â”‚   â”‚   Pattern       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚   Detector      â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ "ä½ æ˜¯ä¸€ä¸ª      â”‚   â”‚  TOLAN RAG      â”‚   â”‚ "å‘¨æ—¥æ™šä¸Š       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  æ—©èµ·çš„äºº"     â”‚   â”‚  å‘é‡æ•°æ®åº“     â”‚   â”‚  æ€»æ˜¯å¤±è´¥"      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  ç°æœ‰å®ç°: âœ… å®Œå–„ (6 ç§æ ‡ç­¾, TOLAN Multi-Query RAG, è®¿é—®è¿½è¸ª)      â”‚ â”‚
â”‚  â”‚  éœ€è¦å¢å¼º: identity_score å­—æ®µ, å¤±è´¥æ¨¡å¼åˆ†æ                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                Layer 5: SELF-CORRECTOR (è‡ªçº å±‚)                      â”‚ â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ åŠ¨æ€éš¾åº¦è°ƒæ•´   â”‚   â”‚  å˜é‡å¥–åŠ±è®¾è®¡   â”‚   â”‚  æ‰¿è¯ºæœºåˆ¶       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Dynamic       â”‚   â”‚  Variable       â”‚   â”‚  Commitment     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   Difficulty   â”‚   â”‚   Rewards       â”‚   â”‚    Device       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ "é™çº§åˆ° 2 åˆ†é’Ÿ"â”‚   â”‚ "éšæœºå½©è›‹"     â”‚   â”‚ "å¤§å£°è¯´æ‰¿è¯º"   â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  ç°æœ‰å®ç°: âš ï¸ éƒ¨åˆ† (useToneManager è¯­æ°”åˆ‡æ¢)                        â”‚ â”‚
â”‚  â”‚  éœ€è¦æ–°å¢: useDifficultyAdjuster, useRewardEngine                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    æ¨ªåˆ‡å…³æ³¨ç‚¹ (Cross-cutting Concerns)               â”‚ â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  AI å¯¹è¯å¼•æ“   â”‚   â”‚  æƒ…æ„ŸçŠ¶æ€æœº     â”‚   â”‚  åˆ†æè¿½è¸ª       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Gemini Live   â”‚   â”‚  Emotion FSM    â”‚   â”‚  Analytics      â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  ç°æœ‰: âœ…       â”‚   â”‚  ç°æœ‰: âš ï¸      â”‚   â”‚  ç°æœ‰: âœ…       â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ äºŒã€ç°æœ‰æ¶æ„ä¸ HumanOS æ¡†æ¶çš„æ˜ å°„

### 2.1 ç°æœ‰æ¨¡å—å½’ç±»

| HumanOS å±‚çº§ | ç°æœ‰æ¨¡å— | å®ç°ç¨‹åº¦ | æ ¸å¿ƒåŠŸèƒ½ |
|-------------|---------|---------|---------|
| **Planner** | - | âŒ æ—  | ä»»åŠ¡åªæ˜¯ç®€å•å­˜å‚¨ï¼Œæ— æ™ºèƒ½è§„åˆ’ |
| **Executor** | useVirtualMessages | âš ï¸ 30% | å®šæ—¶é¼“åŠ±æ¶ˆæ¯ |
| | useToneManager | âš ï¸ 20% | è¯­æ°”åˆ‡æ¢ï¼ˆè¢«åŠ¨å“åº”ï¼‰ |
| | æ¨é€é€šçŸ¥ (APNS/FCM) | âš ï¸ 20% | æ—¶é—´è§¦å‘ï¼Œæ— ä¸Šä¸‹æ–‡æ„ŸçŸ¥ |
| **Verifier** | Gemini Vision | âš ï¸ 40% | è§†è§‰éªŒè¯èƒ½åŠ›å­˜åœ¨ä½†æœªç³»ç»ŸåŒ– |
| | StatsView | âš ï¸ 30% | åŸºç¡€ç»Ÿè®¡ï¼Œæ— è¿ç»­æ€§è¿½è¸ª |
| **Memory** | TOLAN RAG | âœ… 80% | å¤šå±‚å‘é‡æ£€ç´¢ï¼Œæ ‡ç­¾åˆ†ç±» |
| | memory-extractor | âœ… 70% | è®°å¿†æå–ä¸å»é‡ |
| | useAsyncMemoryPipeline | âœ… 70% | å¼‚æ­¥è®°å¿†æ³¨å…¥ |
| **Self-Corrector** | useToneManager | âš ï¸ 20% | ä»…è¯­æ°”è°ƒæ•´ï¼Œæ— éš¾åº¦/å¥–åŠ± |

### 2.2 æ¶æ„ç¼ºå£åˆ†æ

```
ç¼ºå£çƒ­åŠ›å›¾ (Gap Heatmap)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å±‚çº§           å®ç°ç¨‹åº¦    ä¼˜å…ˆçº§    å½±å“èŒƒå›´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Planner        â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  â˜…â˜…â˜…â˜…â˜…    ç”¨æˆ·ä½“éªŒæ ¸å¿ƒ
Executor       â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘  â˜…â˜…â˜…â˜…â˜†    è¡Œä¸ºæ”¹å˜å…³é”®
Verifier       â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  â˜…â˜…â˜…â˜†â˜†    é—­ç¯éªŒè¯
Memory         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  â˜…â˜…â˜†â˜†â˜†    å·²å®Œå–„
Self-Corrector â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â˜…â˜…â˜…â˜…â˜†    ç•™å­˜å…³é”®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¼˜å…ˆçº§æ’åºï¼š
1. ğŸ”´ Planner (æ‰§è¡Œæ„å›¾ + å¼¹æ€§åŒºé—´) - æœ€é«˜
2. ğŸŸ  Self-Corrector (åŠ¨æ€éš¾åº¦ + æ‰¿è¯ºæœºåˆ¶) - é«˜
3. ğŸŸ¡ Executor (ä¸Šä¸‹æ–‡è§¦å‘ + ç¯å¢ƒè®¾è®¡) - ä¸­é«˜
4. ğŸŸ¢ Verifier (ä¾¦æ¢æ¨¡å¼ + å½’å› åˆ†æ) - ä¸­
5. ğŸ”µ Memory (èº«ä»½å»ºæ¨¡å¢å¼º) - ä½ï¼ˆå·²å®Œå–„ï¼‰
```

---

## ğŸ—ï¸ ä¸‰ã€å®Œæ•´ç³»ç»Ÿæ¶æ„è®¾è®¡

### 3.1 æ ¸å¿ƒæ•°æ®æµ

```
ç”¨æˆ·è®¾å®šä¹ æƒ¯ç›®æ ‡
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PLANNER (è§„åˆ’å±‚)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  è¾“å…¥:                                                      â”‚
â”‚  â”œâ”€ ä¹ æƒ¯æè¿°: "æˆ‘æƒ³æ¯å¤©æ—©ç¡"                                â”‚
â”‚  â”œâ”€ ç”¨æˆ·åå¥½: PREF æ ‡ç­¾è®°å¿†                                 â”‚
â”‚  â”œâ”€ å†å²æ•°æ®: è¿‡å» 30 å¤©çš„ç¡çœ æ—¶é—´                          â”‚
â”‚  â””â”€ ä¸Šä¸‹æ–‡ä¿¡å·: ä»Šæ—¥æ—¥ç¨‹ã€å¤©æ°”ã€èº«ä½“çŠ¶æ€                    â”‚
â”‚                                                             â”‚
â”‚  å¤„ç†:                                                      â”‚
â”‚  1. æ‰§è¡Œæ„å›¾ç¼–è¯‘ (Implementation Intentions)                â”‚
â”‚     "æˆ‘æƒ³æ—©ç¡" â†’ "22:15 æ”¶å°¾å·¥ä½œ â†’ 22:30 æ´—æ¼± â†’ 22:50 ä¸ŠåºŠ" â”‚
â”‚                                                             â”‚
â”‚  2. å¼¹æ€§åŒºé—´è®¡ç®— (Comfort Zone - KRIYA)                     â”‚
â”‚     â”œâ”€ åŸºç¡€ç›®æ ‡: 23:00 å‰å…¥ç¡                               â”‚
â”‚     â”œâ”€ å¼¹æ€§ä¸‹é™: 22:30 (ç†æƒ³)                               â”‚
â”‚     â””â”€ å¼¹æ€§ä¸Šé™: 23:30 (å¯æ¥å—)                             â”‚
â”‚     â˜… æ ¹æ®ä»Šæ—¥çŠ¶æ€åŠ¨æ€è°ƒæ•´ï¼Œä¸æ˜¯å›ºå®šå€¼                      â”‚
â”‚                                                             â”‚
â”‚  3. ä¹ æƒ¯å åŠ æ£€æµ‹ (Habit Stacking)                           â”‚
â”‚     æŸ¥æ‰¾é”šç‚¹ä¹ æƒ¯: "æ™šé¤å" â†’ æŒ‚è½½ "æ•£æ­¥ 10 åˆ†é’Ÿ"            â”‚
â”‚                                                             â”‚
â”‚  è¾“å‡º: ExecutionPlan                                        â”‚
â”‚  {                                                          â”‚
â”‚    steps: [                                                 â”‚
â”‚      {time: "22:15", action: "æ”¶å°¾å·¥ä½œ", location: "ä¹¦æˆ¿"}, â”‚
â”‚      {time: "22:30", action: "æ´—æ¼±", location: "å«ç”Ÿé—´"},   â”‚
â”‚      {time: "22:50", action: "ä¸ŠåºŠ", location: "å§å®¤"}      â”‚
â”‚    ],                                                       â”‚
â”‚    comfortZone: {target: "23:00", min: "22:30", max: "23:30"},
â”‚    anchorHabit: "æ™šé¤å",                                   â”‚
â”‚    confidence: 0.75  // AI å¯¹è®¡åˆ’å¯è¡Œæ€§çš„ä¿¡å¿ƒåº¦             â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXECUTOR (æ‰§è¡Œå±‚)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  è§¦å‘å™¨ç±»å‹:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ—¶é—´è§¦å‘ (Time-based)        ç°æœ‰: âœ…              â”‚   â”‚
â”‚  â”‚ â”œâ”€ 22:15 æ¨é€: "è¯¥æ”¶å°¾å·¥ä½œäº†"                       â”‚   â”‚
â”‚  â”‚ â””â”€ å®ç°: APNS/FCM + æœ¬åœ°é€šçŸ¥                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¸Šä¸‹æ–‡è§¦å‘ (Context-based)   ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚ â”œâ”€ æ£€æµ‹åˆ°ç”¨æˆ·å›å®¶ â†’ è§¦å‘ "å‡†å¤‡æ™šé¤"                 â”‚   â”‚
â”‚  â”‚ â”œâ”€ æ£€æµ‹åˆ°ç”¨æˆ·é™æ­¢ 30 åˆ†é’Ÿ â†’ æé†’ "ç«™èµ·æ¥æ´»åŠ¨"       â”‚   â”‚
â”‚  â”‚ â””â”€ å®ç°: iOS/Android ä¼ æ„Ÿå™¨ API                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ç¯å¢ƒè®¾è®¡å¼•æ“ (Environment Design):                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¢åŠ é˜»åŠ› (åä¹ æƒ¯)            ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚ â”œâ”€ 22:30 è‡ªåŠ¨é”å®šé«˜å¤šå·´èƒº App (TikTok, Instagram)   â”‚   â”‚
â”‚  â”‚ â”œâ”€ å®ç°: iOS Screen Time API / Android Digital Wellbeingâ”‚
â”‚  â”‚ â””â”€ éœ€è¦: åŸç”Ÿç«¯é›†æˆ                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å‡å°‘é˜»åŠ› (å¥½ä¹ æƒ¯)            ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚ â”œâ”€ 22:30 è‡ªåŠ¨è°ƒæš—å®¶åº­ç¯å…‰                            â”‚   â”‚
â”‚  â”‚ â”œâ”€ 22:30 æ’­æ”¾åŠ©çœ ç™½å™ªéŸ³                              â”‚   â”‚
â”‚  â”‚ â””â”€ å®ç°: MCP æ™ºèƒ½å®¶å±…æ¥å£ (HomeKit / Google Home)    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  AI å®æ—¶å¹²é¢„ (ç°æœ‰æ ¸å¿ƒèƒ½åŠ›):                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Gemini Live è¯­éŸ³å¯¹è¯         ç°æœ‰: âœ…               â”‚   â”‚
â”‚  â”‚ â”œâ”€ ç”¨æˆ·ç‚¹å‡»é€šçŸ¥ â†’ å¯åŠ¨ AI æ•™ç»ƒä¼šè¯                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ å®æ—¶è¯­éŸ³äº¤äº’ï¼Œé™ªä¼´ç”¨æˆ·æ‰§è¡Œä¹ æƒ¯                    â”‚   â”‚
â”‚  â”‚ â””â”€ useAICoachSession ç®¡ç†å®Œæ•´ä¼šè¯ç”Ÿå‘½å‘¨æœŸ            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è™šæ‹Ÿæ¶ˆæ¯ç³»ç»Ÿ                 ç°æœ‰: âœ…               â”‚   â”‚
â”‚  â”‚ â”œâ”€ useVirtualMessages: å®šæ—¶é¼“åŠ±                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ useVirtualMessageOrchestrator: è®°å¿†æ³¨å…¥          â”‚   â”‚
â”‚  â”‚ â””â”€ useToneManager: åŠ¨æ€è¯­æ°”è°ƒæ•´                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VERIFIER (éªŒè¯å±‚)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å¤šæ¨¡æ€éªŒè¯ (Multi-modal Verification):                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è§†è§‰éªŒè¯ (Vision)            ç°æœ‰: âš ï¸ éƒ¨åˆ†          â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡: é˜…è¯» â†’ æ‹æ‘„ä¹¦é¡µï¼ŒéªŒè¯é¡µç å˜åŒ–              â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡: æ•´ç† â†’ æ‹æ‘„æ¡Œé¢ï¼ŒéªŒè¯æ•´æ´åº¦                â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡: è¿åŠ¨ â†’ è§†é¢‘é€šè¯ï¼ŒéªŒè¯åŠ¨ä½œæ‰§è¡Œ              â”‚   â”‚
â”‚  â”‚ â”œâ”€ ç°æœ‰å®ç°: Gemini Vision èƒ½åŠ›å­˜åœ¨                  â”‚   â”‚
â”‚  â”‚ â””â”€ éœ€è¦: ç³»ç»ŸåŒ–çš„éªŒè¯æµç¨‹ (useHabitVerifier)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¼ æ„Ÿå™¨éªŒè¯ (Sensor)          ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡: ç¡çœ  â†’ æ£€æµ‹å±å¹•å…³é—­ã€æ‰‹æœºé™æ­¢             â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡: è¿åŠ¨ â†’ è¯»å– HealthKit/Google Fit æ­¥æ•°      â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡: å†¥æƒ³ â†’ æ£€æµ‹å¿ƒç‡å˜åŒ–                        â”‚   â”‚
â”‚  â”‚ â””â”€ å®ç°: åŸç”Ÿç«¯å¥åº·æ•°æ® API                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ä¾¦æ¢æ¨¡å¼ (Detective Mode - KRIYA):                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å½’å› åˆ†æå¼•æ“                 ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ å½“éªŒè¯å¤±è´¥æ—¶ï¼Œä¸ç«‹å³åˆ¤å®š"å¤±è´¥"ï¼Œè€Œæ˜¯å¯åŠ¨åˆ†æ:       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 1. è®¡ç®— Surprise Score (æƒŠå¥‡åˆ†å€¼)                   â”‚   â”‚
â”‚  â”‚    = |å®é™…è¡Œä¸º - é¢„æœŸè¡Œä¸º| / æ ‡å‡†å·®                  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 2. æŠ›å‡ºå‡è®¾ (Hypothesis)                            â”‚   â”‚
â”‚  â”‚    â”œâ”€ "æˆ‘å‘ç°ä½ ä»Šå¤©æ²¡æœ‰å®Œæˆé˜…è¯»"                    â”‚   â”‚
â”‚  â”‚    â”œâ”€ "æ˜¯å› ä¸ºä»Šå¤©å·¥ä½œå¤ªå¿™å—ï¼Ÿ(æ—¥ç¨‹æ•°æ®)"            â”‚   â”‚
â”‚  â”‚    â”œâ”€ "è¿˜æ˜¯å› ä¸ºä»Šå¤©ä¸‹é›¨å¿ƒæƒ…ä¸å¥½ï¼Ÿ(å¤©æ°”æ•°æ®)"        â”‚   â”‚
â”‚  â”‚    â””â”€ "æˆ–è€…æ˜¯ä¹¦å¤ªæ— èŠäº†ï¼Ÿ(å†…å®¹å› ç´ )"                â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 3. ç”¨æˆ·ç¡®è®¤ â†’ å­˜å…¥ Memory ä½œä¸ºå¤±è´¥æ¨¡å¼              â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… ä»·å€¼: å‡å°‘ç¾è€»æ„Ÿï¼Œå°†"æˆ‘æ‡’"é‡æ„ä¸º"ç¯å¢ƒå—é™"        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ä¹ æƒ¯è¿½è¸ªå¯è§†åŒ– (Habit Tracker):                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è¿ç»­æ€§è¿½è¸ª                   ç°æœ‰: âš ï¸ éƒ¨åˆ†          â”‚   â”‚
â”‚  â”‚ â”œâ”€ Don't Break the Chain (æ—¥å†æ‰“å¡)                 â”‚   â”‚
â”‚  â”‚ â”œâ”€ è¿ç»­å¤©æ•°ç»Ÿè®¡ (currentStreak)                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ ç°æœ‰å®ç°: successRecord ä¸­æœ‰åŸºç¡€å­—æ®µ             â”‚   â”‚
â”‚  â”‚ â””â”€ éœ€è¦: å¯è§†åŒ–æ—¥å†ç»„ä»¶ (StatsView å¢å¼º)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  è¾“å‡º: VerificationResult                                   â”‚
â”‚  {                                                          â”‚
â”‚    status: 'success' | 'partial' | 'failed' | 'excused',   â”‚
â”‚    evidence: {type: 'vision', data: 'ä¹¦é¡µç…§ç‰‡ hash'},      â”‚
â”‚    attribution: {reason: 'å·¥ä½œå¿™', confidence: 0.8},        â”‚
â”‚    surpriseScore: 0.3,  // åç¦»é¢„æœŸç¨‹åº¦                     â”‚
â”‚    identityVote: +1,    // å¯¹èº«ä»½çš„æŠ•ç¥¨ (+1/-1)             â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MEMORY (è®°å¿†å±‚)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ç°æœ‰æ¶æ„ (å·²å®Œå–„):                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TOLAN Multi-Query RAG        ç°æœ‰: âœ…               â”‚   â”‚
â”‚  â”‚ â”œâ”€ åå¥½å±‚: PREF + EFFECTIVE (å§‹ç»ˆåŠ è½½)              â”‚   â”‚
â”‚  â”‚ â”œâ”€ æ ¸å¿ƒå±‚: ç›¸ä¼¼åº¦ â‰¥ 0.5                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ æ‰©å±•å±‚: ç›¸ä¼¼åº¦ 0.3-0.5                           â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä»»åŠ¡å†å²å±‚: task_name æ¨¡ç³ŠåŒ¹é…                   â”‚   â”‚
â”‚  â”‚ â””â”€ MRR èåˆæ’åº                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 6 ç§è®°å¿†æ ‡ç­¾                 ç°æœ‰: âœ…               â”‚   â”‚
â”‚  â”‚ â”œâ”€ PREF: AI äº¤äº’åå¥½                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ EFFECTIVE: æœ‰æ•ˆæ¿€åŠ±æ–¹å¼                          â”‚   â”‚
â”‚  â”‚ â”œâ”€ PROC: æ‹–å»¶åŸå›                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ EMO: æƒ…ç»ªæ¨¡å¼                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ SOMA: èº«å¿ƒååº”                                   â”‚   â”‚
â”‚  â”‚ â””â”€ SAB: è‡ªæˆ‘å¦¨ç¢                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  éœ€è¦å¢å¼º:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ èº«ä»½å»ºæ¨¡å¼•æ“ (Identity Modeler)    å¾…å®ç°: âŒ       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ æ–°å¢å­—æ®µ: identity_score (èº«ä»½åˆ†æ•°)                 â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ æ¯æ¬¡æˆåŠŸéªŒè¯ = èº«ä»½æŠ•ç¥¨ +1                          â”‚   â”‚
â”‚  â”‚ æ¯æ¬¡å¤±è´¥éªŒè¯ = èº«ä»½æŠ•ç¥¨ -1 (æˆ– 0ï¼Œå¦‚æœæœ‰å€Ÿå£)       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ èº«ä»½ç±»å‹:                                            â”‚   â”‚
â”‚  â”‚ â”œâ”€ reader_identity_score: 12 â†’ "ä½ æ˜¯ä¸€ä¸ªé˜…è¯»è€…"     â”‚   â”‚
â”‚  â”‚ â”œâ”€ early_riser_score: 8 â†’ "ä½ æ˜¯ä¸€ä¸ªæ—©èµ·çš„äºº"        â”‚   â”‚
â”‚  â”‚ â””â”€ exerciser_score: 15 â†’ "ä½ æ˜¯ä¸€ä¸ªè¿åŠ¨çˆ±å¥½è€…"       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ åº”ç”¨:                                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ AI åœ¨å¯¹è¯ä¸­å¼•ç”¨: "ä½ è¿‡å» 10 å¤©éƒ½æŒ‰æ—¶ç¡è§‰äº†"      â”‚   â”‚
â”‚  â”‚ â””â”€ å¼ºåŒ–ç”¨æˆ·çš„è‡ªæˆ‘è®¤çŸ¥                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¤±è´¥æ¨¡å¼è¯†åˆ« (Failure Pattern Detector)  å¾…å®ç°: âŒ â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ æŸ¥è¯¢: æ£€ç´¢æ‰€æœ‰ status='failed' çš„éªŒè¯è®°å½•           â”‚   â”‚
â”‚  â”‚ åˆ†æ: èšç±»ç›¸ä¼¼çš„å¤±è´¥åŸå›                             â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ å‘ç°:                                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ "å‘¨æ—¥æ™šä¸Šå¤±è´¥ç‡ 80%" â†’ å‘¨æ—¥å¢å¼ºå¹²é¢„              â”‚   â”‚
â”‚  â”‚ â”œâ”€ "ä¸‹é›¨å¤©è¿åŠ¨å¤±è´¥ 70%" â†’ æä¾›å®¤å†…æ›¿ä»£æ–¹æ¡ˆ          â”‚   â”‚
â”‚  â”‚ â””â”€ "å·¥ä½œå¿™æ—¶é˜…è¯»å¤±è´¥ 60%" â†’ å»ºè®®å¾®é˜…è¯» (2 åˆ†é’Ÿ)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SELF-CORRECTOR (è‡ªçº å±‚)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  åŠ¨æ€éš¾åº¦è°ƒæ•´ (Dynamic Difficulty Adjustment):              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ é™çº§ç­–ç•¥ (Fallback)          ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ è§„åˆ™: è¿ç»­ 2 å¤©å¤±è´¥ â†’ è‡ªåŠ¨é™çº§                       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ ç¤ºä¾‹:                                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ "é˜…è¯» 30 åˆ†é’Ÿ" â†’ "é˜…è¯» 2 åˆ†é’Ÿ"                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ "è·‘æ­¥ 5 å…¬é‡Œ" â†’ "æ•£æ­¥ 10 åˆ†é’Ÿ"                   â”‚   â”‚
â”‚  â”‚ â””â”€ "23:00 ç¡è§‰" â†’ "00:00 å‰ç¡è§‰"                    â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… åŸåˆ™: ä¿æŒè¿ç»­æ€§æ¯”ä¿æŒå¼ºåº¦æ›´é‡è¦                   â”‚   â”‚
â”‚  â”‚   ("ç»ä¸é”™è¿‡ä¸¤æ¬¡"åŸåˆ™)                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å‡çº§ç­–ç•¥ (Progressive Overload)   å¾…å®ç°: âŒ        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ è§„åˆ™: è¿ç»­ 7 å¤©æˆåŠŸ â†’ å»ºè®®å¢åŠ éš¾åº¦                   â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ ç¤ºä¾‹:                                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ "é˜…è¯» 2 åˆ†é’Ÿ" â†’ "é˜…è¯» 5 åˆ†é’Ÿ"                    â”‚   â”‚
â”‚  â”‚ â””â”€ "æ•£æ­¥ 10 åˆ†é’Ÿ" â†’ "å¿«èµ° 15 åˆ†é’Ÿ"                  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… ç›®æ ‡: ç»´æŒ"å¿ƒæµ (Flow)"çŠ¶æ€                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  å˜é‡å¥–åŠ±è®¾è®¡ (Variable Rewards):                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ éšæœºå¥–åŠ±æœºåˆ¶                 ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ æŠµæŠ—å¤šå·´èƒºè€å—æ€§ (Habituation):                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ ä¸æ˜¯æ¯æ¬¡å®Œæˆéƒ½ç»™åŒæ ·åé¦ˆ                         â”‚   â”‚
â”‚  â”‚ â”œâ”€ 70% æ¦‚ç‡: ç®€å• "Completed âœ“"                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ 20% æ¦‚ç‡: è§£é”å°å½©è›‹ (éŸ³æ•ˆ/åŠ¨ç”»)                 â”‚   â”‚
â”‚  â”‚ â””â”€ 10% æ¦‚ç‡: æ·±åº¦åé¦ˆ (AI ä¸ªæ€§åŒ–é¼“åŠ±)               â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… åŸç†: è€è™æœºæ•ˆåº”ï¼Œä¿æŒç”¨æˆ·æœŸå¾…æ„Ÿ                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  æ‰¿è¯ºæœºåˆ¶ (Commitment Device):                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æŒ‡å·®ç¡®è®¤ (Point-and-Call)    ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ å½“ç”¨æˆ·è¯•å›¾æ”¾å¼ƒæ—¶:                                    â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 1. é”å®šæœŸ (1 åˆ†é’Ÿ)                                  â”‚   â”‚
â”‚  â”‚    â””â”€ å±å¹•é”å®šï¼Œç»™ç”¨æˆ·ç†æ™ºäº‰å–æ—¶é—´                   â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 2. å£å¤´ç¡®è®¤                                         â”‚   â”‚
â”‚  â”‚    â””â”€ "è¯·å¤§å£°è¯´ï¼šæˆ‘é€‰æ‹©æ”¾å¼ƒä»Šå¤©çš„é˜…è¯»"              â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 3. åæœç¡®è®¤                                         â”‚   â”‚
â”‚  â”‚    â””â”€ "è¯·è¯´ï¼šæˆ‘æ¥å—å¯èƒ½ä¼šåæ‚”çš„åæœ"                â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… åŸç†: å¼ºè¿«è°ƒç”¨ç³»ç»Ÿ 2 (ç†æ€§æ€è€ƒ)                   â”‚   â”‚
â”‚  â”‚   ä»æ— æ„è¯†çš„"é¡ºæ‰‹å…³æ‰"å˜æˆæœ‰æ„è¯†çš„"é€‰æ‹©æ”¾å¼ƒ"        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ¬¡æ—¥åé¦ˆé—­ç¯                 ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ åŸºäºä¸»åŠ¨æ¨ç† (Active Inference):                     â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 1. è®°å½•é€‰æ‹©                                         â”‚   â”‚
â”‚  â”‚    â””â”€ ç”¨æˆ·æ˜¨æ™šé€‰æ‹©æ”¾å¼ƒç¡è§‰ï¼Œç†¬å¤œåˆ° 2 ç‚¹             â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 2. æ¬¡æ—¥è¿½é—®                                         â”‚   â”‚
â”‚  â”‚    â””â”€ "æ˜¨æ™šç†¬å¤œåï¼Œä»Šå¤©æ„Ÿè§‰æ€ä¹ˆæ ·ï¼Ÿ"                â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 3. è®°å½•çœŸå®åæœ                                     â”‚   â”‚
â”‚  â”‚    â””â”€ ç”¨æˆ·: "å¤´ç—›æ¬²è£‚ï¼Œåƒä¸ªåºŸç‰©"                    â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ 4. ä¸‹æ¬¡æé†’                                         â”‚   â”‚
â”‚  â”‚    â””â”€ AI: "ä½ ä¸Šæ¬¡è¯´ç†¬å¤œè®©ä½ 'å¤´ç—›æ¬²è£‚'ï¼Œ             â”‚   â”‚
â”‚  â”‚           ä½ ç¡®å®šä»Šå¤©è¦é‡å¤é‚£ä¸ªç»“æœå—ï¼Ÿ"              â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… åŸç†: å°†æœªæ¥çš„æƒ©ç½šæå‰åˆ°å†³ç­–å½“ä¸‹                   â”‚   â”‚
â”‚  â”‚   å¯¹æŠ—åŒæ›²è´´ç°æ•ˆåº”                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  æ¨¡å¼åˆ‡æ¢ (KRIYA å¯å‘):                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ çŠ¶æ€æ„ŸçŸ¥çš„æ¨¡å¼åˆ‡æ¢           ç°æœ‰: âŒ å¾…å®ç°        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ æ£€æµ‹ç”¨æˆ·çŠ¶æ€ â†’ åˆ‡æ¢å¹²é¢„æ¨¡å¼:                        â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ IF æ£€æµ‹åˆ°ç”¨æˆ·æ˜¨æ™šé€šå®µ:                              â”‚   â”‚
â”‚  â”‚    â†’ è¿›å…¥ KRIYA æ¨¡å¼ (å®½å®¹ã€é™çº§ç›®æ ‡ã€å½’å› åˆ†æ)     â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ IF æ£€æµ‹åˆ°ç”¨æˆ·çŠ¶æ€æ»¡æ ¼:                              â”‚   â”‚
â”‚  â”‚    â†’ è¿›å…¥ HumanOS æ¨¡å¼ (ä¸¥æ ¼æ‰§è¡Œã€å¼ºåŠ›å¹²é¢„)         â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ â˜… ç†å¿µ: ä¸¥æ ¼æ—¶ä¸¥æ ¼ï¼Œå®½å®¹æ—¶å®½å®¹                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å››ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 4.1 æ–°å¢ Hooks è®¾è®¡

#### 4.1.1 useHabitPlanner (è§„åˆ’å±‚æ ¸å¿ƒ)

```typescript
// src/hooks/useHabitPlanner.ts

interface ExecutionStep {
  time: string;           // "22:15"
  action: string;         // "æ”¶å°¾å·¥ä½œ"
  location: string;       // "ä¹¦æˆ¿"
  trigger?: string;       // è§¦å‘æ¡ä»¶
}

interface ComfortZone {
  target: string;         // "23:00" - ç›®æ ‡æ—¶é—´
  min: string;            // "22:30" - ç†æƒ³ä¸‹é™
  max: string;            // "23:30" - å¯æ¥å—ä¸Šé™
  adjusted: boolean;      // æ˜¯å¦è¢«åŠ¨æ€è°ƒæ•´
  adjustReason?: string;  // "æ£€æµ‹åˆ°ä»Šæ—¥å·¥ä½œç¹å¿™"
}

interface ExecutionPlan {
  habitId: string;
  steps: ExecutionStep[];
  comfortZone: ComfortZone;
  anchorHabit?: string;   // ä¹ æƒ¯å åŠ çš„é”šç‚¹
  confidence: number;     // AI å¯¹è®¡åˆ’å¯è¡Œæ€§çš„ä¿¡å¿ƒåº¦ (0-1)
}

interface UseHabitPlannerReturn {
  // ç”Ÿæˆæ‰§è¡Œè®¡åˆ’
  generatePlan: (habitDescription: string) => Promise<ExecutionPlan>;

  // åŠ¨æ€è°ƒæ•´å¼¹æ€§åŒºé—´
  adjustComfortZone: (context: UserContext) => Promise<ComfortZone>;

  // æ£€æµ‹ä¹ æƒ¯å åŠ æœºä¼š
  findAnchorHabits: (newHabit: string) => Promise<string[]>;

  // å½“å‰è®¡åˆ’
  currentPlan: ExecutionPlan | null;

  // åŠ è½½çŠ¶æ€
  isGenerating: boolean;
}

export function useHabitPlanner(userId: string): UseHabitPlannerReturn {
  // å®ç°é€»è¾‘...
}
```

#### 4.1.2 useHabitVerifier (éªŒè¯å±‚æ ¸å¿ƒ)

```typescript
// src/hooks/useHabitVerifier.ts

interface VerificationEvidence {
  type: 'vision' | 'sensor' | 'self-report' | 'inferred';
  data: string;           // å›¾ç‰‡ hash / ä¼ æ„Ÿå™¨è¯»æ•° / ç”¨æˆ·è¾“å…¥
  confidence: number;     // è¯æ®å¯ä¿¡åº¦ (0-1)
  timestamp: Date;
}

interface Attribution {
  reason: string;         // "å·¥ä½œå¤ªå¿™"
  category: 'external' | 'internal' | 'contextual';
  confidence: number;     // AI å¯¹å½’å› çš„ä¿¡å¿ƒåº¦
  userConfirmed: boolean; // ç”¨æˆ·æ˜¯å¦ç¡®è®¤
}

interface VerificationResult {
  status: 'success' | 'partial' | 'failed' | 'excused';
  evidence: VerificationEvidence | null;
  attribution: Attribution | null;
  surpriseScore: number;  // åç¦»é¢„æœŸç¨‹åº¦ (0-1)
  identityVote: -1 | 0 | 1; // å¯¹èº«ä»½çš„æŠ•ç¥¨
}

interface UseHabitVerifierReturn {
  // è¯·æ±‚è§†è§‰éªŒè¯
  requestVisualVerification: (taskType: string) => Promise<void>;

  // å¤„ç†éªŒè¯ç»“æœ
  processVerification: (image: Blob) => Promise<VerificationResult>;

  // å¯åŠ¨ä¾¦æ¢æ¨¡å¼ (å½’å› åˆ†æ)
  startDetectiveMode: (failedHabit: string) => Promise<Attribution>;

  // æäº¤ç”¨æˆ·ç¡®è®¤çš„å½’å› 
  confirmAttribution: (attribution: Attribution) => Promise<void>;

  // å½“å‰éªŒè¯çŠ¶æ€
  verificationState: 'idle' | 'requesting' | 'analyzing' | 'detective';
}

export function useHabitVerifier(userId: string): UseHabitVerifierReturn {
  // å®ç°é€»è¾‘...
}
```

#### 4.1.3 useDifficultyAdjuster (è‡ªçº å±‚æ ¸å¿ƒ)

```typescript
// src/hooks/useDifficultyAdjuster.ts

interface DifficultyLevel {
  level: 'micro' | 'easy' | 'medium' | 'hard' | 'challenge';
  target: number;         // ç›®æ ‡å€¼ (åˆ†é’Ÿ/æ­¥æ•°/ç­‰)
  unit: string;           // "minutes" | "steps" | "pages"
}

interface AdjustmentRecommendation {
  currentLevel: DifficultyLevel;
  recommendedLevel: DifficultyLevel;
  reason: string;         // "è¿ç»­ 2 å¤©å¤±è´¥ï¼Œå»ºè®®é™çº§"
  confidence: number;
}

interface UseDifficultyAdjusterReturn {
  // è·å–å½“å‰éš¾åº¦
  getCurrentDifficulty: (habitId: string) => DifficultyLevel;

  // åˆ†ææ˜¯å¦éœ€è¦è°ƒæ•´
  analyzeAdjustment: (habitId: string) => Promise<AdjustmentRecommendation | null>;

  // åº”ç”¨è°ƒæ•´
  applyAdjustment: (habitId: string, newLevel: DifficultyLevel) => Promise<void>;

  // è‡ªåŠ¨è°ƒæ•´å¼€å…³
  autoAdjustEnabled: boolean;
  setAutoAdjustEnabled: (enabled: boolean) => void;
}

export function useDifficultyAdjuster(userId: string): UseDifficultyAdjusterReturn {
  // å®ç°é€»è¾‘...
}
```

#### 4.1.4 useCommitmentDevice (æ‰¿è¯ºæœºåˆ¶)

```typescript
// src/hooks/useCommitmentDevice.ts

interface CommitmentState {
  phase: 'active' | 'lockdown' | 'confirmation' | 'released';
  lockdownRemaining: number; // é”å®šå‰©ä½™ç§’æ•°
  requiresVerbalConfirmation: boolean;
}

interface UseCommitmentDeviceReturn {
  // è§¦å‘é”å®šæœŸ
  triggerLockdown: (duration: number) => void;

  // è¯·æ±‚å£å¤´ç¡®è®¤
  requestVerbalConfirmation: (phrase: string) => Promise<boolean>;

  // è®°å½•ç”¨æˆ·é€‰æ‹©
  recordChoice: (choice: 'continue' | 'quit', reason?: string) => void;

  // å½“å‰æ‰¿è¯ºçŠ¶æ€
  commitmentState: CommitmentState;

  // å†å²é€‰æ‹©è®°å½• (ç”¨äºæ¬¡æ—¥åé¦ˆ)
  recentChoices: Array<{
    habitId: string;
    choice: 'continue' | 'quit';
    reason?: string;
    timestamp: Date;
    consequence?: string; // æ¬¡æ—¥è®°å½•çš„åæœ
  }>;
}

export function useCommitmentDevice(userId: string): UseCommitmentDeviceReturn {
  // å®ç°é€»è¾‘...
}
```

### 4.2 æ•°æ®åº“ Schema æ‰©å±•

```sql
-- èº«ä»½åˆ†æ•°è¡¨
CREATE TABLE user_identity_scores (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) NOT NULL,
  identity_type TEXT NOT NULL,  -- 'reader' | 'early_riser' | 'exerciser' | ...
  score INTEGER DEFAULT 0,
  last_vote_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, identity_type)
);

-- éªŒè¯è®°å½•è¡¨
CREATE TABLE habit_verifications (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) NOT NULL,
  habit_id UUID REFERENCES reminders(id) NOT NULL,
  verification_date DATE NOT NULL,

  -- éªŒè¯ç»“æœ
  status TEXT NOT NULL,  -- 'success' | 'partial' | 'failed' | 'excused'
  evidence_type TEXT,    -- 'vision' | 'sensor' | 'self-report'
  evidence_data JSONB,   -- è¯æ®æ•°æ®

  -- å½’å› åˆ†æ
  attribution_reason TEXT,
  attribution_category TEXT,  -- 'external' | 'internal' | 'contextual'
  user_confirmed BOOLEAN DEFAULT FALSE,

  -- è¯„åˆ†
  surprise_score DECIMAL(3, 2),  -- 0.00 - 1.00
  identity_vote SMALLINT,        -- -1, 0, 1

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(habit_id, verification_date)
);

-- éš¾åº¦è°ƒæ•´å†å²
CREATE TABLE difficulty_adjustments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) NOT NULL,
  habit_id UUID REFERENCES reminders(id) NOT NULL,

  previous_level TEXT NOT NULL,
  new_level TEXT NOT NULL,
  reason TEXT NOT NULL,
  auto_adjusted BOOLEAN DEFAULT TRUE,

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- æ‰¿è¯ºé€‰æ‹©è®°å½•
CREATE TABLE commitment_choices (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) NOT NULL,
  habit_id UUID REFERENCES reminders(id) NOT NULL,

  choice TEXT NOT NULL,  -- 'continue' | 'quit'
  quit_reason TEXT,
  lockdown_survived BOOLEAN,  -- æ˜¯å¦ç†¬è¿‡äº†é”å®šæœŸ
  verbal_confirmed BOOLEAN,   -- æ˜¯å¦å£å¤´ç¡®è®¤

  -- æ¬¡æ—¥åé¦ˆ
  next_day_followup_at TIMESTAMP WITH TIME ZONE,
  consequence_reported TEXT,  -- "å¤´ç—›æ¬²è£‚"
  regret_level SMALLINT,      -- 1-5

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- å¼¹æ€§åŒºé—´è®°å½•
CREATE TABLE comfort_zone_history (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) NOT NULL,
  habit_id UUID REFERENCES reminders(id) NOT NULL,

  target_value TEXT NOT NULL,  -- "23:00"
  min_value TEXT NOT NULL,     -- "22:30"
  max_value TEXT NOT NULL,     -- "23:30"

  adjusted BOOLEAN DEFAULT FALSE,
  adjust_reason TEXT,
  context_signals JSONB,  -- {"work_busy": true, "weather": "rainy"}

  effective_date DATE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 4.3 Edge Function æ–°å¢

```typescript
// supabase/functions/habit-planner/index.ts
// ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ + å¼¹æ€§åŒºé—´

// supabase/functions/habit-verifier/index.ts
// å¤šæ¨¡æ€éªŒè¯ + ä¾¦æ¢æ¨¡å¼å½’å› åˆ†æ

// supabase/functions/difficulty-adjuster/index.ts
// åŠ¨æ€éš¾åº¦è°ƒæ•´é€»è¾‘

// supabase/functions/identity-tracker/index.ts
// èº«ä»½åˆ†æ•°æ›´æ–° + èº«ä»½æ¶ˆæ¯ç”Ÿæˆ

// supabase/functions/next-day-followup/index.ts
// æ¬¡æ—¥åé¦ˆè°ƒåº¦ (cron job)
```

---

## ğŸ—ºï¸ äº”ã€å®ç°è·¯çº¿å›¾

### Phase 1: è§„åˆ’å±‚ (Planner) - æ ¸å¿ƒä»·å€¼

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä¾èµ– |
|------|--------|--------|------|
| useHabitPlanner Hook | â˜…â˜…â˜…â˜…â˜… | ä¸­ | æ—  |
| æ‰§è¡Œæ„å›¾ç¼–è¯‘ (AI Prompt) | â˜…â˜…â˜…â˜…â˜… | ä½ | useHabitPlanner |
| å¼¹æ€§åŒºé—´è®¡ç®— (KRIYA) | â˜…â˜…â˜…â˜…â˜† | ä¸­ | useHabitPlanner |
| ä¹ æƒ¯å åŠ æ£€æµ‹ | â˜…â˜…â˜…â˜†â˜† | ä¸­ | Memory å±‚ |
| Onboarding é›†æˆ | â˜…â˜…â˜…â˜…â˜† | ä½ | useHabitPlanner |

### Phase 2: è‡ªçº å±‚ (Self-Corrector) - ç•™å­˜å…³é”®

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä¾èµ– |
|------|--------|--------|------|
| useDifficultyAdjuster Hook | â˜…â˜…â˜…â˜…â˜† | ä¸­ | Verifier å±‚ |
| é™çº§ç­–ç•¥ (è¿ç»­ 2 å¤©å¤±è´¥) | â˜…â˜…â˜…â˜…â˜† | ä½ | useDifficultyAdjuster |
| useCommitmentDevice Hook | â˜…â˜…â˜…â˜…â˜† | é«˜ | åŸç”Ÿç«¯é›†æˆ |
| å£å¤´ç¡®è®¤ (è¯­éŸ³è¯†åˆ«) | â˜…â˜…â˜…â˜†â˜† | é«˜ | useCommitmentDevice |
| æ¬¡æ—¥åé¦ˆé—­ç¯ | â˜…â˜…â˜…â˜†â˜† | ä¸­ | commitment_choices è¡¨ |

### Phase 3: éªŒè¯å±‚ (Verifier) - é—­ç¯éªŒè¯

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä¾èµ– |
|------|--------|--------|------|
| useHabitVerifier Hook | â˜…â˜…â˜…â˜†â˜† | ä¸­ | Gemini Vision |
| è§†è§‰éªŒè¯æµç¨‹ç³»ç»ŸåŒ– | â˜…â˜…â˜…â˜†â˜† | ä¸­ | useHabitVerifier |
| ä¾¦æ¢æ¨¡å¼ (å½’å› åˆ†æ) | â˜…â˜…â˜…â˜†â˜† | ä¸­ | Memory å±‚ |
| Don't Break the Chain å¯è§†åŒ– | â˜…â˜…â˜†â˜†â˜† | ä½ | StatsView |
| ä¼ æ„Ÿå™¨é›†æˆ (HealthKit) | â˜…â˜…â˜†â˜†â˜† | é«˜ | åŸç”Ÿç«¯ |

### Phase 4: æ‰§è¡Œå±‚ (Executor) - ç¯å¢ƒè®¾è®¡

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä¾èµ– |
|------|--------|--------|------|
| ä¸Šä¸‹æ–‡è§¦å‘å™¨ (ä¼ æ„Ÿå™¨) | â˜…â˜…â˜†â˜†â˜† | é«˜ | åŸç”Ÿç«¯ |
| App é”å®š (Screen Time API) | â˜…â˜…â˜†â˜†â˜† | é«˜ | åŸç”Ÿç«¯ |
| MCP æ™ºèƒ½å®¶å±…é›†æˆ | â˜…â˜†â˜†â˜†â˜† | é«˜ | MCP æœåŠ¡å™¨ |

### Phase 5: è®°å¿†å±‚å¢å¼º (Memory) - å·²å®Œå–„

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä¾èµ– |
|------|--------|--------|------|
| identity_score å­—æ®µ | â˜…â˜…â˜†â˜†â˜† | ä½ | æ•°æ®åº“ |
| å¤±è´¥æ¨¡å¼èšç±»åˆ†æ | â˜…â˜…â˜†â˜†â˜† | ä¸­ | Verifier å±‚ |
| AI èº«ä»½å¼•ç”¨æ¶ˆæ¯ | â˜…â˜…â˜†â˜†â˜† | ä½ | identity_score |

---

## ğŸ“Š å…­ã€ä¸ç°æœ‰æ¶æ„çš„é›†æˆç‚¹

### 6.1 useAICoachSession é›†æˆ

```
ç°æœ‰æµç¨‹:
  startSession() â†’ get-system-instruction â†’ Gemini Live â†’ saveSessionMemory()

å¢å¼ºåæµç¨‹:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1. startSession()                                               â”‚
  â”‚    â”œâ”€ [æ–°å¢] è°ƒç”¨ useHabitPlanner.generatePlan()                â”‚
  â”‚    â””â”€ å°† ExecutionPlan æ³¨å…¥ systemInstruction                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 2. ä¼šè¯è¿›è¡Œä¸­                                                   â”‚
  â”‚    â”œâ”€ [ç°æœ‰] VAD + è¯­æ°”ç®¡ç† + è™šæ‹Ÿæ¶ˆæ¯                          â”‚
  â”‚    â”œâ”€ [æ–°å¢] æ£€æµ‹ç”¨æˆ·æŠ—æ‹’ â†’ useCommitmentDevice.triggerLockdown()â”‚
  â”‚    â””â”€ [æ–°å¢] æ£€æµ‹å®Œæˆä¿¡å· â†’ useHabitVerifier.requestVisualVerification()
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 3. saveSessionMemory()                                          â”‚
  â”‚    â”œâ”€ [ç°æœ‰] æå–è®°å¿† + æ ‡ç­¾                                    â”‚
  â”‚    â”œâ”€ [æ–°å¢] æ›´æ–° identity_score                                â”‚
  â”‚    â””â”€ [æ–°å¢] è®°å½• VerificationResult                            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 4. [æ–°å¢] æ¬¡æ—¥åé¦ˆ                                              â”‚
  â”‚    â”œâ”€ å¦‚æœæ˜¨å¤©é€‰æ‹©äº† quit                                       â”‚
  â”‚    â”œâ”€ è§¦å‘ next-day-followup Edge Function                      â”‚
  â”‚    â””â”€ æ¨é€é€šçŸ¥è¯¢é—®åæœ                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 è®°å¿†ç³»ç»Ÿé›†æˆ

```
ç°æœ‰ get-system-instruction å¢å¼º:

è¾“å…¥æ–°å¢:
  â”œâ”€ currentPlan: ExecutionPlan (æ¥è‡ª Planner)
  â”œâ”€ identityScores: {reader: 12, early_riser: 8}
  â””â”€ recentFailurePatterns: ["å‘¨æ—¥æ™šä¸Š", "ä¸‹é›¨å¤©"]

systemInstruction å¢å¼º:
  â”œâ”€ åŒ…å«æ‰§è¡Œè®¡åˆ’æ­¥éª¤
  â”œâ”€ åŒ…å«èº«ä»½å¼ºåŒ–è¯­å¥: "ä½ å·²ç»è¿ç»­ 10 å¤©æ˜¯ä¸€ä¸ªæ—©èµ·çš„äººäº†"
  â””â”€ åŒ…å«å¤±è´¥é¢„è­¦: "æ³¨æ„: ä»Šå¤©æ˜¯å‘¨æ—¥ï¼Œä½ è¿‡å»åœ¨å‘¨æ—¥çš„æˆåŠŸç‡æ˜¯ 20%"
```

### 6.3 åŸç”Ÿç«¯é›†æˆéœ€æ±‚

```
iOS (mindboat-ios-web-warpper):
  â”œâ”€ Screen Time API: é”å®šé«˜å¤šå·´èƒº App
  â”œâ”€ HealthKit: è¯»å–æ­¥æ•°ã€ç¡çœ æ•°æ®ã€å¿ƒç‡
  â”œâ”€ Core Location: æ£€æµ‹å›å®¶/ç¦»å®¶äº‹ä»¶
  â”œâ”€ Core Motion: æ£€æµ‹ä¹…å/è¿åŠ¨çŠ¶æ€
  â””â”€ Speech Recognition: å£å¤´ç¡®è®¤éªŒè¯

Android (FireGo):
  â”œâ”€ Digital Wellbeing API: é”å®š App
  â”œâ”€ Google Fit: è¯»å–å¥åº·æ•°æ®
  â”œâ”€ Geofencing: ä½ç½®è§¦å‘å™¨
  â”œâ”€ Activity Recognition: çŠ¶æ€æ£€æµ‹
  â””â”€ Speech Recognition: å£å¤´ç¡®è®¤éªŒè¯

JS Bridge æ–°å¢æ¥å£:
  â”œâ”€ lockApps(appIds: string[], duration: number)
  â”œâ”€ unlockApps()
  â”œâ”€ getHealthData(type: 'steps' | 'sleep' | 'heart_rate')
  â”œâ”€ setGeofence(location: LatLng, radius: number, callback: string)
  â”œâ”€ getCurrentActivity() â†’ 'still' | 'walking' | 'running' | ...
  â””â”€ requestSpeechRecognition(prompt: string) â†’ string
```

---

## ğŸ¯ ä¸ƒã€æ ¸å¿ƒå·®å¼‚åŒ–æ€»ç»“

### 7.1 ä¸ç°æœ‰äº§å“çš„å¯¹æ¯”

| ç‰¹æ€§ | ä¼ ç»Ÿé—¹é’Ÿ/æ‰“å¡ | Lumi (ç°æœ‰) | Lumi HumanOS (ç›®æ ‡) |
|------|-------------|-------------|-------------------|
| è§¦å‘æ–¹å¼ | æ—¶é—´ | æ—¶é—´ + AI | æ—¶é—´ + ä¸Šä¸‹æ–‡ + AI |
| éªŒè¯æ–¹å¼ | æ‰‹åŠ¨æ‰“å¡ | è§†é¢‘é€šè¯ | å¤šæ¨¡æ€ (è§†è§‰+ä¼ æ„Ÿå™¨) |
| å¤±è´¥å¤„ç† | è®°å½•å¤±è´¥ | è®°å½•å¤±è´¥ | ä¾¦æ¢æ¨¡å¼ + å½’å› åˆ†æ |
| éš¾åº¦è°ƒæ•´ | æ—  | æ—  | åŠ¨æ€ (è‡ªåŠ¨é™çº§/å‡çº§) |
| æ”¾å¼ƒå¹²é¢„ | æ—  | è¯­æ°”åˆ‡æ¢ | é”å®šæœŸ + å£å¤´ç¡®è®¤ |
| è®°å¿† | æ—  | æ ‡ç­¾è®°å¿† | èº«ä»½å»ºæ¨¡ + å¤±è´¥æ¨¡å¼ |
| åé¦ˆé—­ç¯ | æ—  | æ—  | æ¬¡æ—¥åæœè¿½è¸ª |

### 7.2 Pitch é‡‘å¥

> **"If tools are APIs for machines, behaviors are APIs for humans. Lumi is the API Gateway that ensures your requests actually execute."**
>
> ï¼ˆå¦‚æœå·¥å…·æ˜¯æœºå™¨çš„ APIï¼Œé‚£ä¹ˆè¡Œä¸ºå°±æ˜¯äººç±»çš„ APIã€‚Lumi æ˜¯é‚£ä¸ªç¡®ä¿è¯·æ±‚è¢«å®é™…æ‰§è¡Œçš„ API ç½‘å…³ã€‚ï¼‰

### 7.3 æŠ€æœ¯æŠ¤åŸæ²³

1. **Human-as-Tool èŒƒå¼**ï¼šå°†äººç±»è¡Œä¸ºè§†ä¸º Tool Callï¼Œå¼•å…¥è¶…æ—¶é‡è¯•ã€å¼‚å¸¸æ•è·ã€è´Ÿè½½å‡è¡¡
2. **TOLAN Multi-Query RAG**ï¼šè¯­ä¹‰çº§åˆ«çš„è®°å¿†æ£€ç´¢ï¼Œä¸æ˜¯å…³é”®è¯åŒ¹é…
3. **æŒ‡å·®ç¡®è®¤æ•°å­—åŒ–**ï¼šå°†é“è·¯å®‰å…¨æ³•ç§»æ¤åˆ°ä¹ æƒ¯å…»æˆ
4. **ä¸»åŠ¨æ¨ç†åé¦ˆé—­ç¯**ï¼šè·¨è¶Šæ—¶é—´çš„æƒ©ç½šæ¬è¿ï¼Œå¯¹æŠ—åŒæ›²è´´ç°
5. **KRIYA æŸ”æ€§é€»è¾‘**ï¼šå¼¹æ€§åŒºé—´ + ä¾¦æ¢æ¨¡å¼ï¼Œå‡å°‘ç¾è€»æ„Ÿ

---

## ğŸ“ å…«ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯åš (ä¸éœ€è¦åŸç”Ÿç«¯æ”¹åŠ¨)

1. **è®¾è®¡ useHabitPlanner Hook**
   - å®šä¹‰æ•°æ®ç»“æ„
   - å®ç°æ‰§è¡Œæ„å›¾ç¼–è¯‘ (AI Prompt Engineering)
   - å®ç°å¼¹æ€§åŒºé—´è®¡ç®—é€»è¾‘

2. **è®¾è®¡ habit-planner Edge Function**
   - æ¥æ”¶ä¹ æƒ¯æè¿° + ç”¨æˆ·ä¸Šä¸‹æ–‡
   - è°ƒç”¨ LLM ç”Ÿæˆæ‰§è¡Œè®¡åˆ’
   - è¿”å› ExecutionPlan

3. **æ‰©å±•æ•°æ®åº“ Schema**
   - æ·»åŠ  user_identity_scores è¡¨
   - æ·»åŠ  habit_verifications è¡¨
   - æ·»åŠ  comfort_zone_history è¡¨

4. **å¢å¼º systemInstruction**
   - æ³¨å…¥æ‰§è¡Œè®¡åˆ’æ­¥éª¤
   - æ³¨å…¥èº«ä»½å¼ºåŒ–è¯­å¥
   - æ³¨å…¥å¤±è´¥æ¨¡å¼é¢„è­¦

### éœ€è¦åŸç”Ÿç«¯é…åˆ

1. Screen Time / Digital Wellbeing API é›†æˆ
2. HealthKit / Google Fit é›†æˆ
3. è¯­éŸ³è¯†åˆ«ï¼ˆå£å¤´ç¡®è®¤ï¼‰
4. åœ°ç†å›´æ ï¼ˆä½ç½®è§¦å‘å™¨ï¼‰

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*
*åˆ›å»ºæ—¥æœŸ: 2026-01-29*
*ä½œè€…: Claude Code*
